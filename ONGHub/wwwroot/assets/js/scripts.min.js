const App=function(){let e={};const t={init(){document.querySelector(".theme-option")?(this.setupThemeButtons(),this.loadSavedTheme(),this.setupDropdown(),console.log("🎨 Sistema de temas (dropdown) inicializado")):console.warn("⚠ Botões de tema não encontrados")},setupThemeButtons(){document.querySelectorAll(".theme-option").forEach((e=>{e.addEventListener("click",(e=>{const t=e.currentTarget.dataset.theme;this.setTheme(t),this.updateButtonStates(t),this.updateCurrentThemeIcon(t),this.closeDropdown()}))}))},setupDropdown(){const e=document.querySelector(".theme-selector-dropdown"),t=document.querySelector(".theme-dropdown-btn");e&&t&&(document.addEventListener("click",(t=>{e.contains(t.target)||this.closeDropdown()})),t.addEventListener("click",(e=>{e.stopPropagation(),this.toggleDropdown()})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&this.closeDropdown()})))},toggleDropdown(){const e=document.querySelector(".theme-dropdown-btn"),t="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!t)},closeDropdown(){document.querySelector(".theme-dropdown-btn").setAttribute("aria-expanded","false")},updateCurrentThemeIcon(e){const t=document.querySelector(".theme-current-icon"),o={light:"☀️",dark:"🌙","high-contrast":"⚫"};t&&(t.textContent=o[e]||"🎨")},setTheme(e){document.documentElement.removeAttribute("data-theme"),"light"!==e&&document.documentElement.setAttribute("data-theme",e),localStorage.setItem("preferred-theme",e)},loadSavedTheme(){const e=localStorage.getItem("preferred-theme");e?(this.setTheme(e),this.updateButtonStates(e),this.updateCurrentThemeIcon(e)):(this.setTheme("light"),this.updateButtonStates("light"),this.updateCurrentThemeIcon("light"))},updateButtonStates(e){document.querySelectorAll(".theme-option").forEach((t=>{const o=t.dataset.theme===e;t.setAttribute("aria-pressed",o)}))},getCurrentTheme:()=>document.documentElement.getAttribute("data-theme")||"light",resetTheme(){localStorage.removeItem("preferred-theme"),this.setTheme("light"),this.updateButtonStates("light"),this.updateCurrentThemeIcon("light")}},o={init(){this.setupSmoothScroll(),this.setupBackToTop(),console.log("🧭 Navegação inicializada")},setupSmoothScroll(){e.navLinks.length&&e.navLinks.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const o=e.getAttribute("href"),n=document.querySelector(o);n&&n.scrollIntoView({behavior:"smooth",block:"start"})}))}))},setupBackToTop(){e.btnTopo&&(window.addEventListener("scroll",(()=>{window.pageYOffset>300?e.btnTopo.classList.add("visible"):e.btnTopo.classList.remove("visible")})),e.btnTopo.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})))}},n={init(){this.setupDonationForm(),this.setupRegistrationForm(),console.log("📝 Formulários inicializados")},setupDonationForm(){if(!e.formDoacao)return;const t=e.formDoacao.querySelectorAll(".btn--valor"),o=e.formDoacao.querySelector("#valor");t.forEach((e=>{e.addEventListener("click",(()=>{t.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),o&&(o.value="")}))})),o&&o.addEventListener("input",(()=>{t.forEach((e=>e.classList.remove("active")))}))},setupRegistrationForm(){e.formCadastro&&e.formCadastro.addEventListener("submit",(e=>{this.validateRegistration()||(e.preventDefault(),this.showFormError("Por favor, preencha todos os campos obrigatórios."))}))},validateRegistration(){const t=e.formCadastro.querySelectorAll("[required]");let o=!0;return t.forEach((e=>{e.value.trim()?e.style.borderColor="":(o=!1,e.style.borderColor="var(--color-accent)")})),o},showFormError(e){alert(e)}},s={init(){this.menuButton=document.querySelector(".header__btn-mobile"),this.menu=document.querySelector(".header__menu"),this.menuButton&&this.menu?(this.setupEventListeners(),console.log("📱 Menu mobile inicializado")):console.warn("⚠ Elementos do menu mobile não encontrados")},setupEventListeners(){this.menuButton.addEventListener("click",(()=>this.toggleMenu())),this.menu.addEventListener("click",(e=>this.handleMenuClicks(e))),window.addEventListener("resize",(()=>{window.innerWidth>=768&&this.closeMenu()}))},handleMenuClicks(e){const t=e.target.closest("a");if(!t)return;const o=t.closest("li.nav__item--dropdown");if(o&&t.classList.contains("nav__link")){window.innerWidth<=767&&(e.preventDefault(),this.toggleDropdown(o,t))}else t.classList.contains("submenu__link")?this.closeMenu():!t.getAttribute("href")||o||t.closest(".theme-selector-dropdown")||this.closeMenu()},toggleDropdown(e,t){e.classList.contains("dropdown-open")?(e.classList.remove("dropdown-open"),t.setAttribute("aria-expanded","false")):(this.menu.querySelectorAll("li.nav__item--dropdown.dropdown-open").forEach((e=>{e.classList.remove("dropdown-open");const t=e.querySelector(".nav__link");t&&t.setAttribute("aria-expanded","false")})),e.classList.add("dropdown-open"),t.setAttribute("aria-expanded","true"))},toggleMenu(){"true"===this.menuButton.getAttribute("aria-expanded")?this.closeMenu():this.openMenu()},openMenu(){this.menuButton.setAttribute("aria-expanded","true"),this.menu.classList.add("nav-open"),document.body.style.overflow="hidden"},closeMenu(){this.menuButton.setAttribute("aria-expanded","false"),this.menu.classList.remove("nav-open"),document.body.style.overflow="",this.menu.querySelectorAll("li.nav__item--dropdown.dropdown-open").forEach((e=>{e.classList.remove("dropdown-open");const t=e.querySelector(".nav__link");t&&t.setAttribute("aria-expanded","false")}))}},a={currentIndex:0,focusableElements:[],firstFocusableElement:null,lastFocusableElement:null,init(){if(!e.modal)return void console.log("ℹ️ Modal não encontrado - provavelmente não está nesta página");const t=document.querySelectorAll(".btn--saiba-mais");0!==t.length?(this.setupEventListeners(),console.log("🖼️ Modal inicializado com",t.length,"botões")):console.log('ℹ️ Nenhum botão "Saiba Mais" encontrado')},setupEventListeners(){document.querySelectorAll(".btn--saiba-mais").forEach((e=>{e.addEventListener("click",(()=>this.open(e)))})),e.modalCloseBtn.addEventListener("click",(()=>this.close())),e.modal.addEventListener("click",(t=>{t.target===e.modal&&this.close()})),document.addEventListener("click",(t=>{t.target.classList.contains("btn--doar-especifico")&&e.modal.contains(t.target)&&this.handleDonationClick(t.target)}))},open(t){const o=t.getAttribute("aria-controls"),n=document.getElementById(o),s=t.closest(".causa-card").querySelector("h3").innerHTML;n&&(e.modalBody.innerHTML="<h3>"+s+"</h3>"+n.innerHTML,e.modal.classList.add("visible"),e.modal.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",this.setupFocusTrap(),this.initializeGallery(),this.setupCustomVideoPlay())},close(){const t=e.modalBody.querySelector("video");t&&t.pause(),this.removeFocusTrap(),e.modal.classList.remove("visible"),e.modal.setAttribute("aria-hidden","true"),e.modalBody.innerHTML="",document.body.style.overflow="auto"},setupFocusTrap(){this.focusableElements=Array.from(e.modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')),0!==this.focusableElements.length&&(this.firstFocusableElement=this.focusableElements[0],this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1],setTimeout((()=>{this.firstFocusableElement.focus()}),100),document.addEventListener("keydown",this.handleKeydown.bind(this)))},handleKeydown(t){if(!e.modal.classList.contains("visible"))return;if("Escape"===t.key)return void this.close();if("Tab"!==t.key)return;const o=document.activeElement;if(!e.modal.contains(o))return t.preventDefault(),void this.firstFocusableElement.focus();t.shiftKey?o===this.firstFocusableElement&&(t.preventDefault(),this.lastFocusableElement.focus()):o===this.lastFocusableElement&&(t.preventDefault(),this.firstFocusableElement.focus())},removeFocusTrap(){document.removeEventListener("keydown",this.handleKeydown.bind(this)),this.focusableElements=[],this.firstFocusableElement=null,this.lastFocusableElement=null},initializeGallery(){const t=e.modalBody.querySelector(".gallery-main-view"),o=e.modalBody.querySelectorAll(".gallery-media-item"),n=e.modalBody.querySelectorAll(".gallery-thumb-item"),s=e.modalBody.querySelector(".gallery-arrow.next"),a=e.modalBody.querySelector(".gallery-arrow.prev"),r=e.modalBody.querySelector("video");t&&0!==o.length&&(this.currentIndex=0,n.forEach((e=>{e.addEventListener("click",(()=>{this.showMedia(parseInt(e.dataset.index),r)}))})),s&&s.addEventListener("click",(()=>this.nextMedia(o.length,r))),a&&a.addEventListener("click",(()=>this.prevMedia(o.length,r))))},showMedia(t,o){0===this.currentIndex&&0!==t&&o&&o.pause(),this.currentIndex=t,e.modalBody.querySelectorAll(".gallery-media-item, .gallery-thumb-item").forEach((e=>e.classList.remove("active")));const n=e.modalBody.querySelector(`.gallery-media-item[data-index="${t}"]`),s=e.modalBody.querySelector(`.gallery-thumb-item[data-index="${t}"]`);n&&n.classList.add("active"),s&&s.classList.add("active")},nextMedia(e,t){let o=this.currentIndex+1;o>=e&&(o=0),this.showMedia(o,t)},prevMedia(e,t){let o=this.currentIndex-1;o<0&&(o=e-1),this.showMedia(o,t)},setupCustomVideoPlay(){e.modalBody.querySelectorAll(".custom-play-overlay").forEach((e=>{const t=e.closest(".gallery-media-item").querySelector("video"),o=e.querySelector(".play-button");t&&o&&(o.addEventListener("click",(()=>{t.play(),e.classList.add("hidden")})),t.addEventListener("ended",(()=>{e.classList.remove("hidden")})),t.addEventListener("pause",(()=>{t.ended||e.classList.remove("hidden")})),t.addEventListener("play",(()=>{e.classList.add("hidden")})))}))},handleDonationClick(t){const o=t.dataset.causa;e.selectCausa&&(e.selectCausa.value=o,this.close(),this.scrollToDonation())},scrollToDonation(){const e=document.getElementById("doar-agora");e&&setTimeout((()=>{e.scrollIntoView({behavior:"smooth",block:"start"})}),300)}},r={init(){this.setupLoginAlert(),this.setupDonationAlert(),this.setupRegistrationAlert(),console.log("💬 Sistema de alertas inicializado")},setupLoginAlert(){const e=document.querySelector(".btn--login");e&&e.addEventListener("click",(e=>{e.preventDefault(),this.showAlert("Sistema de login em desenvolvimento! <br> Em breve você poderá fazer login na plataforma.","info")}))},setupDonationAlert(){const e=document.querySelector(".apoie__form");e&&e.addEventListener("submit",(t=>{t.preventDefault();const o=document.getElementById("causa-doacao"),n=document.getElementById("valor")||document.querySelector(".btn--valor.active");let s=o?o.options[o.selectedIndex].text:"Geral",a="0,00";n&&(n.value?a=parseFloat(n.value).toFixed(2):n.textContent&&(a=n.textContent.replace("R$ ",""))),this.showAlert(`👍 Obrigado pela sua doação!<br><br>\n            <strong>Causa:</strong> ${s}<br>\n            Em um ambiente real, você seria redirecionado para o pagamento.`,"success"),e.reset(),document.querySelectorAll(".btn--valor").forEach((e=>e.classList.remove("active")))}))},setupRegistrationAlert(){const e=document.querySelector(".cadastro__form");e&&e.addEventListener("submit",(t=>{t.preventDefault(),this.validateRegistrationForm()&&(this.showAlert("🎉 Cadastro realizado com sucesso!<br><br>\n              <strong>Em breve entraremos em contato</strong> para conversarmos sobre as oportunidades de voluntariado.<br><br>\n              Obrigado por querer fazer a diferença!","success"),e.reset())}))},validateRegistrationForm(){const e=document.querySelectorAll(".cadastro__form [required]");let t=!0;return e.forEach((e=>{e.value.trim()?e.style.borderColor="":(t=!1,e.style.borderColor="var(--color-accent)")})),t||this.showAlert("Por favor, preencha todos os campos obrigatórios marcados em vermelho.","error"),t},showAlert(e,t="info"){const o=document.querySelector(".custom-alert");o&&o.remove();const n=document.createElement("div");n.className=`custom-alert alert--${t}`,n.innerHTML=`\n        <div class="alert-content">\n          <span class="alert-message">${e}</span>\n          <button class="alert-close" aria-label="Fechar mensagem">×</button>\n        </div>\n      `,document.body.appendChild(n),setTimeout((()=>n.classList.add("show")),100),n.querySelector(".alert-close").addEventListener("click",(()=>{n.classList.remove("show"),setTimeout((()=>n.remove()),300)})),"success"!==t&&"info"!==t||setTimeout((()=>{n.parentElement&&(n.classList.remove("show"),setTimeout((()=>n.remove()),300))}),8e3)}};return{init(){e={btnMobile:document.querySelector(".header__btn-mobile"),headerMenu:document.getElementById("main-menu"),modal:document.getElementById("project-modal"),modalCloseBtn:document.getElementById("modal-close"),modalBody:document.getElementById("modal-body"),formDoacao:document.querySelector(".apoie__form"),formCadastro:document.querySelector(".cadastro__form"),selectCausa:document.getElementById("causa-doacao"),btnTopo:document.getElementById("btnTopo"),logo:document.querySelector(".header__logo img"),themeButtons:document.querySelectorAll(".theme-btn"),navLinks:document.querySelectorAll('a[href^="#"]')},console.log("🔍 Elementos encontrados:",{btnMobile:!!e.btnMobile,headerMenu:!!e.headerMenu,modal:!!e.modal,btnTopo:!!e.btnTopo,themeButtons:e.themeButtons.length,navLinks:e.navLinks.length}),t.init(),s.init(),a.init(),n.init(),o.init(),r.init(),console.log("🚀 Aplicação ONGHub inicializada com sucesso!")}}}(),telInput=document.getElementById("telefone");telInput&&telInput.addEventListener("input",(function(e){let t=e.target.value.replace(/\D/g,"");t.length>11&&(t=t.slice(0,11)),t=t.length>6?t.replace(/^(\d{2})(\d{5})(\d{4}).*/,"($1)$2-$3"):t.length>2?t.replace(/^(\d{2})(\d{0,5})/,"($1)$2"):t.replace(/^(\d*)/,"($1"),e.target.value=t}));const cpfInput=document.getElementById("cpf");cpfInput&&cpfInput.addEventListener("input",(function(e){let t=e.target.value.replace(/\D/g,"");t.length>11&&(t=t.slice(0,11)),t.length>9?t=t.replace(/^(\d{3})(\d{3})(\d{3})(\d{0,2}).*/,"$1.$2.$3-$4"):t.length>6?t=t.replace(/^(\d{3})(\d{3})(\d{0,3}).*/,"$1.$2.$3"):t.length>3&&(t=t.replace(/^(\d{3})(\d{0,3})/,"$1.$2")),e.target.value=t}));const nascInput=document.getElementById("nascimento");nascInput&&nascInput.addEventListener("input",(function(e){let t=e.target.value.replace(/\D/g,"");t.length>8&&(t=t.slice(0,8)),t.length>4?t=t.replace(/^(\d{2})(\d{2})(\d{0,4}).*/,"$1/$2/$3"):t.length>2&&(t=t.replace(/^(\d{2})(\d{0,2})/,"$1/$2")),e.target.value=t})),document.addEventListener("DOMContentLoaded",(function(){console.log("🚀 Inicializando aplicação ONGHub..."),App.init()}));