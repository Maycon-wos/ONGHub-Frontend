const ONGHubValidator={config:{animateErrors:!0,scrollToError:!0,showSuccessIcon:!0},init(){this.setupCadastroForm(),this.setupDoacaoForm(),console.log("‚úÖ Valida√ß√£o ONGHub inicializada")},setupCadastroForm(){const e=document.querySelector(".cadastro__form");e&&(this.setupMasks(e),this.setupRealTimeValidation(e),e.addEventListener("submit",(r=>{r.preventDefault(),this.validateCadastroForm(e)?this.onCadastroSuccess(e):this.onFormError(e)})),console.log("üìù Formul√°rio de cadastro configurado"))},setupMasks(e){const r=e.querySelector("#cpf");r&&r.addEventListener("input",(e=>{let r=e.target.value.replace(/\D/g,"");r=r.replace(/^(\d{3})(\d{3})(\d{3})(\d{2}).*/,"$1.$2.$3-$4"),e.target.value=r}));const t=e.querySelector("#telefone");t&&t.addEventListener("input",(e=>{let r=e.target.value.replace(/\D/g,"");r=r.length<=10?r.replace(/^(\d{2})(\d{4})(\d{4}).*/,"($1)$2-$3"):r.replace(/^(\d{2})(\d{5})(\d{4}).*/,"($1)$2-$3"),e.target.value=r}));const o=e.querySelector("#cep");o&&o.addEventListener("input",(r=>{let t=r.target.value.replace(/\D/g,"");t=t.replace(/^(\d{5})(\d{3}).*/,"$1-$2"),r.target.value=t,9===t.length&&this.buscarCEP(t,e)}));const s=e.querySelector("#nascimento");s&&s.addEventListener("input",(e=>{let r=e.target.value.replace(/\D/g,"");r=r.replace(/^(\d{2})(\d{2})(\d{4}).*/,"$1/$2/$3"),e.target.value=r}))},setupRealTimeValidation(e){e.querySelectorAll("input[required], select[required]").forEach((e=>{e.addEventListener("blur",(()=>{this.validateField(e)})),e.addEventListener("input",(()=>{this.clearFieldError(e)}))}))},validateCadastroForm(e){let r=!0,t=null;this.clearAllErrors(e);const o=e.querySelector("#nome");this.validateNome(o)||(r=!1,t||(t=o));const s=e.querySelector("#email");this.validateEmail(s)||(r=!1,t||(t=s));const a=e.querySelector("#nascimento");this.validateNascimento(a)||(r=!1,t||(t=a));const i=e.querySelector("#cpf");this.validateCPF(i)||(r=!1,t||(t=i));const n=e.querySelector("#telefone");this.validateTelefone(n)||(r=!1,t||(t=n));const l=e.querySelector("#cep");this.validateCEP(l)||(r=!1,t||(t=l));const c=e.querySelector("#endereco");this.validateEndereco(c)||(r=!1,t||(t=c));const d=e.querySelector("#cidade");this.validateCidade(d)||(r=!1,t||(t=d));const u=e.querySelector("#estado");return this.validateEstado(u)||(r=!1,t||(t=u)),!r&&t&&this.config.scrollToError&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus()),r},validateField(e){switch(e.id){case"nome":return this.validateNome(e);case"email":return this.validateEmail(e);case"nascimento":return this.validateNascimento(e);case"cpf":return this.validateCPF(e);case"telefone":return this.validateTelefone(e);case"cep":return this.validateCEP(e);case"endereco":return this.validateEndereco(e);case"cidade":return this.validateCidade(e);case"estado":return this.validateEstado(e);default:return this.validateRequired(e)}},validateNome(e){if(!e)return!0;const r=e.value.trim();return""===r?(this.showError(e,"Por favor, digite seu nome completo"),!1):r.length<3?(this.showError(e,"Nome deve ter pelo menos 3 caracteres"),!1):r.includes(" ")?(this.showSuccess(e),!0):(this.showError(e,"Por favor, digite nome e sobrenome"),!1)},validateEmail(e){if(!e)return!0;const r=e.value.trim();return""===r?(this.showError(e,"Por favor, digite seu e-mail"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?(this.showSuccess(e),!0):(this.showError(e,"E-mail inv√°lido. Use o formato: seu@email.com"),!1)},validateNascimento(e){if(!e)return!0;const r=e.value.trim();if(""===r)return this.showError(e,"Por favor, informe sua data de nascimento"),!1;const t=/^(\d{2})\/(\d{2})\/(\d{4})$/;if(!t.test(r))return this.showError(e,"Data inv√°lida. Use o formato: DD/MM/AAAA"),!1;const[,o,s,a]=r.match(t),i=new Date(a,s-1,o);if(i.getDate()!=o||i.getMonth()+1!=s||i.getFullYear()!=a)return this.showError(e,"Data de nascimento inv√°lida"),!1;const n=new Date,l=n.getFullYear()-i.getFullYear(),c=n.getMonth()-i.getMonth();return l<16||16===l&&c<0?(this.showError(e,"Voc√™ precisa ter pelo menos 16 anos"),!1):i>n?(this.showError(e,"Data de nascimento n√£o pode ser no futuro"),!1):(this.showSuccess(e),!0)},validateCPF(e){if(!e)return!0;const r=e.value.replace(/\D/g,"");if(""===r)return this.showError(e,"Por favor, digite seu CPF"),!1;if(11!==r.length)return this.showError(e,"CPF incompleto"),!1;if(/^(\d)\1+$/.test(r))return this.showError(e,"CPF inv√°lido"),!1;let t=0;for(let e=0;e<9;e++)t+=parseInt(r.charAt(e))*(10-e);let o=11-t%11;if(o>=10&&(o=0),o!==parseInt(r.charAt(9)))return this.showError(e,"CPF inv√°lido"),!1;t=0;for(let e=0;e<10;e++)t+=parseInt(r.charAt(e))*(11-e);return o=11-t%11,o>=10&&(o=0),o!==parseInt(r.charAt(10))?(this.showError(e,"CPF inv√°lido"),!1):(this.showSuccess(e),!0)},validateTelefone(e){if(!e)return!0;const r=e.value.replace(/\D/g,"");return""===r?(this.showError(e,"Por favor, digite seu telefone"),!1):r.length<10?(this.showError(e,"Telefone incompleto"),!1):10===r.length&&"9"!==r.charAt(2)?(this.showError(e,"Para fixo, use 10 d√≠gitos. Para celular, use 11 d√≠gitos"),!1):(this.showSuccess(e),!0)},validateCEP(e){if(!e)return!0;const r=e.value.replace(/\D/g,"");return""===r?(this.showError(e,"Por favor, digite seu CEP"),!1):8!==r.length?(this.showError(e,"CEP incompleto"),!1):(this.showSuccess(e),!0)},validateEndereco(e){if(!e)return!0;const r=e.value.trim();return""===r?(this.showError(e,"Por favor, digite seu endere√ßo"),!1):r.length<5?(this.showError(e,"Endere√ßo muito curto"),!1):(this.showSuccess(e),!0)},validateCidade(e){if(!e)return!0;const r=e.value.trim();return""===r?(this.showError(e,"Por favor, digite sua cidade"),!1):r.length<3?(this.showError(e,"Nome de cidade inv√°lido"),!1):(this.showSuccess(e),!0)},validateEstado(e){if(!e)return!0;const r=e.value;return""===r||null===r?(this.showError(e,"Por favor, selecione seu estado"),!1):(this.showSuccess(e),!0)},validateRequired(e){if(!e)return!0;return""===e.value.trim()?(this.showError(e,"Este campo √© obrigat√≥rio"),!1):(this.showSuccess(e),!0)},buscarCEP(e,r){const t=e.replace(/\D/g,"");if(8!==t.length)return;const o=r.querySelector("#endereco"),s=r.querySelector("#cidade"),a=r.querySelector("#estado"),i=r.querySelector("#cep"),n=i.closest(".form-group");n.classList.add("loading"),fetch(`https://viacep.com.br/ws/${t}/json/`).then((e=>e.json())).then((e=>{n.classList.remove("loading"),e.erro?this.showError(i,"CEP n√£o encontrado"):(o&&e.logradouro&&(o.value=`${e.logradouro}${e.complemento?", "+e.complemento:""}`),s&&e.localidade&&(s.value=e.localidade),a&&e.uf&&(a.value=e.uf),o&&(o.focus(),o.setSelectionRange(o.value.length,o.value.length)),this.showSuccess(i))})).catch((()=>{n.classList.remove("loading"),this.showError(i,"Erro ao buscar CEP. Tente novamente")}))},setupDoacaoForm(){const e=document.querySelector(".apoie__form");e&&(e.addEventListener("submit",(r=>{r.preventDefault(),this.validateDoacaoForm(e)&&this.onDoacaoSuccess(e)})),console.log("üí∞ Formul√°rio de doa√ß√£o configurado"))},validateDoacaoForm(e){const r=e.querySelector("#causa-doacao"),t=e.querySelector("#valor"),o=e.querySelectorAll(".btn--valor");let s=!0;r&&r.value||(this.showAlert("Por favor, selecione uma causa para doar","error"),s=!1);const a=Array.from(o).some((e=>e.classList.contains("active"))),i=t&&t.value;return a||i||(this.showAlert("Por favor, selecione ou digite um valor para doar","error"),s=!1),s},showError(e,r){const t=e.closest(".form-group");if(!t)return;this.clearFieldError(e),t.classList.add("form-error"),t.classList.remove("form-success");const o=document.createElement("span");o.className="error-message",o.textContent=r,o.setAttribute("role","alert"),t.appendChild(o),this.config.animateErrors&&(e.style.animation="shake 0.3s",setTimeout((()=>{e.style.animation=""}),300))},showSuccess(e){if(!this.config.showSuccessIcon)return;const r=e.closest(".form-group");r&&(r.classList.remove("form-error"),r.classList.add("form-success"))},clearFieldError(e){const r=e.closest(".form-group");if(!r)return;const t=r.querySelector(".error-message");t&&t.remove(),r.classList.remove("form-error")},clearAllErrors(e){e.querySelectorAll(".error-message").forEach((e=>e.remove()));e.querySelectorAll(".form-error").forEach((e=>{e.classList.remove("form-error","form-success")}))},onCadastroSuccess(e){const r=new FormData(e),t=Object.fromEntries(r.entries());console.log("‚úÖ Cadastro v√°lido:",t),this.showAlert("üéâ Cadastro realizado com sucesso!<br><br>\n        <strong>Em breve entraremos em contato</strong> para conversarmos sobre as oportunidades de voluntariado.<br><br>\n        Obrigado por querer fazer a diferen√ßa!","success"),setTimeout((()=>{e.reset(),this.clearAllErrors(e)}),2e3)},onDoacaoSuccess(e){const r=e.querySelector("#causa-doacao"),t=r?r.options[r.selectedIndex].text:"Geral";this.showAlert(`üëç Obrigado pela sua doa√ß√£o!<br><br>\n        <strong>Causa:</strong> ${t}<br>\n        Em um ambiente real, voc√™ seria redirecionado para o pagamento.`,"success"),e.reset(),document.querySelectorAll(".btn--valor").forEach((e=>e.classList.remove("active")))},onFormError(e){this.showAlert("‚ùå Por favor, corrija os erros no formul√°rio","error")},showAlert(e,r="info"){if(window.Alerts&&window.Alerts.showAlert)return void window.Alerts.showAlert(e,r);const t=document.createElement("div");t.className=`custom-alert alert--${r} show`,t.innerHTML=`\n        <div class="alert-content">\n          <span class="alert-message">${e}</span>\n          <button class="alert-close" onclick="this.parentElement.parentElement.remove()">√ó</button>\n        </div>\n      `,document.body.appendChild(t),setTimeout((()=>{t.classList.remove("show"),setTimeout((()=>t.remove()),300)}),"success"===r?8e3:5e3)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>ONGHubValidator.init())):ONGHubValidator.init(),window.ONGHubValidator=ONGHubValidator;